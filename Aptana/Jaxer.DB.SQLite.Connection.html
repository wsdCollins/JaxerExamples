<html><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><title>Jaxer Framework Reference: Jaxer.DB.SQLite.Connection</title><meta http-equiv="cache-control" content="no-cache"><link rel="stylesheet" href="shared.css" type="text/css"><script src="jquery.js" type="text/javascript"></script><script src="api.js" type="text/javascript"></script></head><body><img src="aptana.gif" hspace="21" vspace="3"><h1>Jaxer.DB.SQLite.Connection : <a href="Object.html">Object</a><div style="font-weight:normal;font-size:70%">Return to: <a href="Jaxer.index.html">Jaxer Framework index</a></div></h1><div class="content"><div class="classDescription">Creates a new connection to the given databaseName (file).</div><a name="Jaxer.DB.SQLite.Connection.Platform Support"></a><h2>Platform Support</h2><p><table cellspacing="2" width="90%"><tr class="compheader"><th class="browser">Jaxer Server Framework</th><th class="browser">Jaxer Client Framework</th></tr><td align="center" title="Jaxer Server Framework" class="comparison yes">1.0</td><td align="center" title="Jaxer Client Framework" class="comparison no">no</td></table></p><a name="Jaxer.DB.SQLite.Connection.Constructors"></a><h2>Constructors</h2><table cellspacing="2" width="90%"><tr class="compheader" visibility=""><th style="text-align:left">Constructor</th><th>Action</th><th class="browser">Jaxer Server Framework</th><th class="browser">Jaxer Client Framework</th></tr><tr class="item "><td class="declaration"><div class="name"><a name="Jaxer.DB.SQLite.Connection."></a><a href="javascript:void(0);" onclick="toggleClickDetails(this)">Jaxer.DB.SQLite.Connection Constructor</a>(<i>Object</i>&nbsp;connectionParams) : <i>Jaxer.DB.SQLite.Connection</i></div><div class="description">Creates a new connection to the given database (file). If the given database does not yet exist, it is created for you when you try to open it. The resulting connection object is the only way you interact with the database.</div></td><td class="show-details"><a href="javascript:void(0);" onclick="toggleRowDetails(this)" style="color:#FFFFFF;">Show Details</a></td><td align="center" title="Jaxer Server Framework" class="comparison yes">1.0</td><td align="center" title="Jaxer Client Framework" class="comparison no">no</td></tr><tr class="details-method"><td valign="top" colspan="4"><a name="Jaxer.DB.SQLite.Connection."></a><h3>Jaxer.DB.SQLite.Connection(<i>Object</i>&nbsp;connectionParams) : <i>Jaxer.DB.SQLite.Connection</i></h3><p class="padded">Creates a new connection to the given database (file). If the given database does not yet exist, it is created for you when you try to open it. The resulting connection object is the only way you interact with the database.</p><p class="padded"><b>Parameters</b><table cellspacing="1" width="90%" class="parameter-table"><tr><td width="10%"><i>Object</i></td><td width="10%"><b>connectionParams</b></td><td width="80%">A hashmap of parameters for connecting to the database. Required properties are: <ul> <li>PATH (the path to the database file).</li> </ul> Optional parameters are: <ul> <li>CLOSE_AFTER_EXECUTE (whether to close the connection after each call to execute, default is false), and</li> <li>CLOSE_AFTER_REQUEST (whether to close the connection after each request, default is true).</li> </ul></td></tr></table></p><p class="padded"><b>Returns</b><table cellspacing="1" width="90%" class="parameter-table"><tr><td width="20%"><i>Jaxer.DB.SQLite.Connection</i></td><td width="80%">Returns an instance of Connection.</td></tr></table></p><dl class="details"></dl></td></tr></table><a name="Jaxer.DB.SQLite.Connection.Properties"></a><h2>Properties</h2><table cellspacing="2" width="90%"><tr class="compheader" visibility=""><th style="text-align:left">Property</th><th>Action</th><th class="browser">Jaxer Server Framework</th><th class="browser">Jaxer Client Framework</th></tr><tr class="item "><td class="declaration"><div class="name"><a name="Jaxer.DB.SQLite.Connection.implementation"></a>implementation
					 : <i>String</i></div><div class="description">Returns the string identifying the database implementation of this connection. You can compare this e.g. to Jaxer.DB.SQLite.IMPLEMENTATION or Jaxer.DB.MySQL.IMPLEMENTATION</div></td><td class="no-details">
						No Details
					</td><td align="center" title="Jaxer Server Framework" class="comparison yes">1.0</td><td align="center" title="Jaxer Client Framework" class="comparison no">no</td></tr><tr class="details-property"><td valign="top" colspan="4"><dl class="details"></dl></td></tr><tr class="item "><td class="declaration"><div class="name"><a name="Jaxer.DB.SQLite.Connection.isOpen"></a>isOpen
					 : <i>Boolean</i></div><div class="description">Is the connection currently open? Recall that even if the answer is no the connection would automatically be opened when needed.</div></td><td class="no-details">
						No Details
					</td><td align="center" title="Jaxer Server Framework" class="comparison yes">1.0</td><td align="center" title="Jaxer Client Framework" class="comparison no">no</td></tr><tr class="details-property"><td valign="top" colspan="4"><dl class="details"></dl></td></tr><tr class="item "><td class="declaration"><div class="name"><a name="Jaxer.DB.SQLite.Connection.lastInsertId"></a>lastInsertId
					 : <i>Number</i></div><div class="description">Returns the unique "rowid" of the most recent successful INSERT command on the current connection. If the table has a column of type INTEGER PRIMARY KEY, this is used as the rowid. If no successful INSERTs have ever occurred on this connection, 0 is returned. Note that unsuccessful INSERTs do not change this value. This is a synonym for lastInsertRowId. See http://www.sqlite.org/c3ref/last_insert_rowid.html for more details.</div></td><td class="no-details">
						No Details
					</td><td align="center" title="Jaxer Server Framework" class="comparison yes">1.0</td><td align="center" title="Jaxer Client Framework" class="comparison no">no</td></tr><tr class="details-property"><td valign="top" colspan="4"><dl class="details"></dl></td></tr><tr class="item "><td class="declaration"><div class="name"><a name="Jaxer.DB.SQLite.Connection.lastInsertRowId"></a>lastInsertRowId
					 : <i>Number</i></div><div class="description">Returns the unique "rowid" of the most recent successful INSERT command on the current connection. If the table has a column of type INTEGER PRIMARY KEY, this is used as the rowid. If no successful INSERTs have ever occurred on this connection, 0 is returned. Note that unsuccessful INSERTs do not change this value. This is a synonym for lastInsertId. See http://www.sqlite.org/c3ref/last_insert_rowid.html for more details.</div></td><td class="no-details">
						No Details
					</td><td align="center" title="Jaxer Server Framework" class="comparison yes">1.0</td><td align="center" title="Jaxer Client Framework" class="comparison no">no</td></tr><tr class="details-property"><td valign="top" colspan="4"><dl class="details"></dl></td></tr><tr class="item "><td class="declaration"><div class="name"><a name="Jaxer.DB.SQLite.Connection.version"></a>version
					 : <i>String</i></div><div class="description">Returns the string identifying the version of the database to which you are connected.</div></td><td class="no-details">
						No Details
					</td><td align="center" title="Jaxer Server Framework" class="comparison yes">1.0</td><td align="center" title="Jaxer Client Framework" class="comparison no">no</td></tr><tr class="details-property"><td valign="top" colspan="4"><dl class="details"></dl></td></tr></table><a name="Jaxer.DB.SQLite.Connection.Functions"></a><h2>Functions</h2><table cellspacing="2" width="90%"><tr class="compheader" visibility=""><th style="text-align:left">Method</th><th>Action</th><th class="browser">Jaxer Server Framework</th><th class="browser">Jaxer Client Framework</th></tr><tr class="item "><td class="declaration"><div class="name"><a name="Jaxer.DB.SQLite.Connection.close"></a>close() : <i>
			void
		</i></div><div class="description">Closes the connection if it's open. This is optional, and only does something if the connection is open.</div></td><td class="no-details">
						No Details
					</td><td align="center" title="Jaxer Server Framework" class="comparison yes">1.0</td><td align="center" title="Jaxer Client Framework" class="comparison no">no</td></tr><tr class="details-method"><td valign="top" colspan="4"><dl class="details"></dl></td></tr><tr class="item "><td class="declaration"><div class="name"><a name="Jaxer.DB.SQLite.Connection.execute"></a><a href="javascript:void(0);" onclick="toggleClickDetails(this)">execute</a>(<i>String</i>&nbsp;sql) : <i>Jaxer.DB.ResultSet|Number|Object[]</i></div><div class="description">Executes the given sql using the connection. If the SQL includes ?'s (question marks) as parameter placeholders, the values of those parameters should be passed in as extra arguments to this function, either as individual arguments or as a single array. If the last argument is a (non-Array) object, it is used to pass in options. Currently two options are supported: dateHandler and useLocalTimezone. If dateHandler is given, it should be a function that takes the raw MySQL date/time/datetime string representation of a returned cell value, and a string describing the declared type, and returns the desired JavaScript representation. If dateHandler is not given, set useLocalTimezone to true to store date/time values using the local timezone. Otherwise, by default they are stored as UTC.</div></td><td class="show-details"><a href="javascript:void(0);" onclick="toggleRowDetails(this)" style="color:#FFFFFF;">Show Details</a></td><td align="center" title="Jaxer Server Framework" class="comparison yes">1.0</td><td align="center" title="Jaxer Client Framework" class="comparison no">no</td></tr><tr class="details-method"><td valign="top" colspan="4"><p class="padded"><b>Parameters</b><table cellspacing="1" width="90%" class="parameter-table"><tr><td width="10%"><i>String</i></td><td width="10%"><b>sql</b></td><td width="80%">The sql statement to be executed as a prepared statement</td></tr></table></p><p class="padded"><b>Returns</b><table cellspacing="1" width="90%" class="parameter-table"><tr><td width="20%"><i>Jaxer.DB.ResultSet</i></td><td width="80%">The results of the query. For a SELECT-type query, a Jaxer.DB.ResultSet is returned, with 0 or more rows. For an INSERT/UPDATE/DELETE-type query, the number of rows affected is returned.</td></tr><tr><td width="20%"><i>Number</i></td><td width="80%">The results of the query. For a SELECT-type query, a Jaxer.DB.ResultSet is returned, with 0 or more rows. For an INSERT/UPDATE/DELETE-type query, the number of rows affected is returned.</td></tr><tr><td width="20%"><i>Object[]</i></td><td width="80%">The results of the query. For a SELECT-type query, a Jaxer.DB.ResultSet is returned, with 0 or more rows. For an INSERT/UPDATE/DELETE-type query, the number of rows affected is returned.</td></tr></table></p><dl class="details"><dt>Examples</dt><dd><div class="example">	<pre>
		rs = conn.execute("SELECT * FROM myTable");
			rs = conn.execute("SELECT * FROM myTable WHERE id=? AND zip=?", myId, myZip);
			rs = conn.execute("SELECT * FROM myTable WHERE id=? AND zip=?", [myId, myZip]);
		</pre></div></dd></dl></td></tr><tr class="item "><td class="declaration"><div class="name"><a name="Jaxer.DB.SQLite.Connection.getLastInsertRowId"></a><a href="javascript:void(0);" onclick="toggleClickDetails(this)">getLastInsertRowId</a>() : <i>Number</i></div><div class="description">Returns the unique "rowid" of the most recent successful INSERT command on the current connection. If the table has a column of type INTEGER PRIMARY KEY, this is used as the rowid. If no successful INSERTs have ever occurred on this connection, 0 is returned. Note that unsuccessful INSERTs do not change this value. This is the same as asking for the lastInsertRowId or lastInsertId properties. See http://www.sqlite.org/c3ref/last_insert_rowid.html for more details.</div></td><td class="show-details"><a href="javascript:void(0);" onclick="toggleRowDetails(this)" style="color:#FFFFFF;">Show Details</a></td><td align="center" title="Jaxer Server Framework" class="comparison yes">1.0</td><td align="center" title="Jaxer Client Framework" class="comparison no">no</td></tr><tr class="details-method"><td valign="top" colspan="4"><p class="padded"><b>Returns</b><table cellspacing="1" width="90%" class="parameter-table"><tr><td width="20%"><i>Number</i></td><td width="80%">The rowid, or 0</td></tr></table></p><dl class="details"></dl></td></tr><tr class="item "><td class="declaration"><div class="name"><a name="Jaxer.DB.SQLite.Connection.mapExecute"></a><a href="javascript:void(0);" onclick="toggleClickDetails(this)">mapExecute</a>(<i>String</i>&nbsp;sql, <i>Array</i>&nbsp;arrayOfParameters, [<i>Object</i>&nbsp;options]) : <i>Object</i></div><div class="description">Prepares the given SQL query string on the current default database (as defined in configApps.js) and then iteratively executes it over the given array of parameters.</div></td><td class="show-details"><a href="javascript:void(0);" onclick="toggleRowDetails(this)" style="color:#FFFFFF;">Show Details</a></td><td align="center" title="Jaxer Server Framework" class="comparison yes">1.0</td><td align="center" title="Jaxer Client Framework" class="comparison no">no</td></tr><tr class="details-method"><td valign="top" colspan="4"><p class="padded"><b>Parameters</b><table cellspacing="1" width="90%" class="parameter-table"><tr><td width="10%"><i>String</i></td><td width="10%"><b>sql</b></td><td width="80%">The SQL to execute, using ?'s (question marks) as parameter placeholders</td></tr><tr><td width="10%"><i>Array</i></td><td width="10%"><b>arrayOfParameters</b></td><td width="80%">An array of parameters to use for each execution. Each element of the array may itself be a single value or an array of values (corresponding to the ?'s in the SQL)</td></tr><tr><td width="10%"><i>Object</i></td><td width="10%"><b>options</b></td><td width="80%"><b>(optional)</b>An optional hashmap of options. Currently three options are supported: flatten, dateHandler, and useLocalTimezone. If flatten is true, the returned result will be a single ResultSet with its rows being the concatenated rows of each query. If dateHandler is given, it should be a function that takes the raw MySQL date/time/datetime string representation of a returned cell value, and a string describing the declared type, and returns the desired JavaScript representation. If dateHandler is not given, set useLocalTimezone to true to store date/time values using the local timezone. Otherwise, by default they are stored as UTC.</td></tr></table></p><p class="padded"><b>Returns</b><table cellspacing="1" width="90%" class="parameter-table"><tr><td width="20%"><i>Object</i></td><td width="80%">A corresponding array of Jaxer.DB.ResultSets or Numbers for each query, or a combined Jaxer.DB.ResultSet or Number if the 'flatten' option is true. For SELECT-type queries one or more Jaxer.DB.ResultSets are returned; for INSERT/UPDATE/DELETE-type queries the number of affected rows is returned.</td></tr></table></p><dl class="details"><dt>Examples</dt><dd><div class="example">	<pre>
			[rsA, rsB] = conn.mapExecute("SELECT * FROM myTable WHERE id=?", [idA, idB]);
			[rsA, rsB] = conn.mapExecute("SELECT * FROM myTable WHERE id=? AND zip=?", [ [idA, zipA], [idB, zipB] ]);
		</pre></div></dd><dt>See Also</dt><dd><p><a href="Jaxer.DB.ResultSet.html#Jaxer.DB.ResultSet">Jaxer.DB.ResultSet</a></p></dd></dl></td></tr><tr class="item "><td class="declaration"><div class="name"><a name="Jaxer.DB.SQLite.Connection.open"></a>open() : <i>
			void
		</i></div><div class="description">Opens the connection so queries can be executed. This is optional, since if the connection is not open when it's asked to execute some SQL, it will open the connection automatically. Also closing the connection is optional.</div></td><td class="no-details">
						No Details
					</td><td align="center" title="Jaxer Server Framework" class="comparison yes">1.0</td><td align="center" title="Jaxer Client Framework" class="comparison no">no</td></tr><tr class="details-method"><td valign="top" colspan="4"><dl class="details"></dl></td></tr><tr class="item "><td class="declaration"><div class="name"><a name="Jaxer.DB.SQLite.Connection.test"></a><a href="javascript:void(0);" onclick="toggleClickDetails(this)">test</a>(<i>Boolean</i>&nbsp;keepOpen) : <i>Object</i></div><div class="description">Tests the connection by trying to connect and catching and returning any error encountered. If the connection is successful, returns a null.</div></td><td class="show-details"><a href="javascript:void(0);" onclick="toggleRowDetails(this)" style="color:#FFFFFF;">Show Details</a></td><td align="center" title="Jaxer Server Framework" class="comparison yes">1.0</td><td align="center" title="Jaxer Client Framework" class="comparison no">no</td></tr><tr class="details-method"><td valign="top" colspan="4"><p class="padded"><b>Parameters</b><table cellspacing="1" width="90%" class="parameter-table"><tr><td width="10%"><i>Boolean</i></td><td width="10%"><b>keepOpen</b></td><td width="80%">If true, the connection will be kept open (if the test was successful). If false, the connection will be left in the same state as before the test: if it was open before it will be kept open, otherwise it will be closed.</td></tr></table></p><p class="padded"><b>Returns</b><table cellspacing="1" width="90%" class="parameter-table"><tr><td width="20%"><i>Object</i></td><td width="80%">If successful, returns null; if unsuccessful, returns the error. Usually you can use the error's sqlErrorCode and sqlErrorDescription to see what the error was (or just its toString() method).</td></tr></table></p><dl class="details"></dl></td></tr></table></div><div style="visibility:hidden;display:none"> aptana_docs</div></body></html>